(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(a,e,t){a.exports=t(287)},123:function(a,e,t){},124:function(a,e,t){},287:function(a,e,t){"use strict";t.r(e);var n=t(2),r=t.n(n),i=t(44),u=t.n(i),o=(t(123),t(113)),s=t(3),l=t(9),c=t(8),d=t(10),g=t(11),v=t(12),f=(t(124),t(110)),m=t.n(f),h=(t(129),t(301)),p=t(298),C=t(299),E=t(114),b=t(80),G=t(300);function O(a,e){return a.map(function(a){return function(a,e){var t=a.units.reduce(function(a,e){return e+a},0)/a.units.length,n=(t*e.unitsGradePercentage+a.dailyGrade*e.dailyGradePercentage+a.tasksGrade*e.tasksGradePercentage)/100;return Object(s.a)({},a,{unitsGrade:t,finalGrade:n})}(a,e)})}var j=t(77),y=t.n(j),S=t(111),w=t(78),k=t.n(w),P={apiKey:"AIzaSyDkId_dG4QjU31XqPLpGDyWf78gYX9wwFg",authDomain:"students-evaluator.firebaseapp.com",databaseURL:"https://students-evaluator.firebaseio.com",projectId:"students-evaluator",storageBucket:"students-evaluator.appspot.com",messagingSenderId:"122329597109"},x=function(){function a(){Object(c.a)(this,a),this.firestore=void 0,k.a.initializeApp(P),this.firestore=k.a.firestore()}return Object(l.a)(a,[{key:"saveState",value:function(a){localStorage.setItem("appState",JSON.stringify(a))}},{key:"getState",value:function(){var a=localStorage.getItem("appState");return a?JSON.parse(a):null}},{key:"saveStateOnCloud",value:function(){var a=Object(S.a)(y.a.mark(function a(e){return y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",this.firestore.collection("StudentsEvaluations").add(e));case 1:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}]),a}(),N=function(a){function e(){return Object(c.a)(this,e),Object(d.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(v.a)(e,a),e}(m.a),D=new x,R={unitsGradePercentage:40,tasksGradePercentage:40,dailyGradePercentage:20},I=["Nombre alumno","Unidad 1","Unidad 2","Unidad 3","Unidad 4","Unidad 5","Unidad 6","Unidad 7","Unidad 8","Unidad 9","Unidad 10","Pruebas","Cuadernos y tareas","Observaci\xf3n diaria","Nota final"],T=function(a){var e={padding:"16px",background:a.cell.readOnly?"grey":void 0};return r.a.createElement("td",{style:e,onMouseDown:a.onMouseDown,onMouseOver:a.onMouseOver,onDoubleClick:a.onDoubleClick,className:"cell"},a.children)};function U(a){return a.map(function(a){return L(a)})}function L(a){var e=[];return e.push({value:a.id,readOnly:!0}),e.push({value:a.name}),a.units.forEach(function(a){e.push({value:a})}),e.push({value:a.unitsGrade,readOnly:!0}),e.push({value:a.tasksGrade}),e.push({value:a.dailyGrade}),e.push({value:a.finalGrade,readOnly:!0}),e}function F(a){return a.map(function(a){return function(a){var e=a.length-6+2,t=a[0].value,n=a[1].value,r=a.slice(2,e).map(function(a){return parseFloat("".concat(a.value)||"0")}),i=parseFloat("".concat(a[e].value)||"0"),u=parseFloat("".concat(a[e+1].value)||"0"),o=parseFloat("".concat(a[e+2].value)||"0"),s=parseFloat("".concat(a[e+3].value)||"0");return{id:t,name:n,units:r,unitsGrade:i,tasksGrade:u,dailyGrade:o,finalGrade:s}}(a)})}var V=function(a){function e(a){var t;Object(c.a)(this,e),(t=Object(d.a)(this,Object(g.a)(e).call(this,a))).addRow=function(){var a={id:(t.state.currentEvaluation.evaluations.length>0?t.state.currentEvaluation.evaluations[t.state.currentEvaluation.evaluations.length-1].id:0)+1,name:"Ricardo Pall\xe1s",units:[0,0,0,0,0,0,0,0,0,0],unitsGrade:0,tasksGrade:0,dailyGrade:0,finalGrade:0};t.state.currentEvaluation.evaluations.push(a),t.state.grid.push(L(a)),t.updateState(t.state)},t.unitsGradeConfigChanged=function(a){var e=parseInt(a,10)||0,n=Object(s.a)({},t.state.nextConfigCandidate,{unitsGradePercentage:e});t.configPercentageChanged(n)},t.tasksGradeConfigChanged=function(a){var e=parseInt(a,10)||0,n=Object(s.a)({},t.state.nextConfigCandidate,{tasksGradePercentage:e});t.configPercentageChanged(n)},t.dailyGradeConfigChanged=function(a){var e=parseInt(a,10)||0,n=Object(s.a)({},t.state.nextConfigCandidate,{dailyGradePercentage:e});t.configPercentageChanged(n)},t.configPercentageChanged=function(a){var e;console.log(a),(e=a).unitsGradePercentage+e.tasksGradePercentage+e.dailyGradePercentage==100?t.updateState(Object(s.a)({},t.state,{nextConfigCandidate:a,currentEvaluation:Object(s.a)({},t.state.currentEvaluation,{gradesConfig:a}),nextConfigCandidateValid:!0}),function(){var e=t.state.evaluations.map(function(e){return e.name===t.state.currentEvaluation.name&&(e.gradesConfig=a),e});t.updateState(Object(s.a)({},t.state,{evaluations:e}),function(){t.updateEvaluations(t.state.currentEvaluation.evaluations,a)})}):t.updateState(Object(s.a)({},t.state,{nextConfigCandidate:a,nextConfigCandidateValid:!1}))},t.updateEvaluations=function(a,e,n){var r=O(a,e),i=U(r),u=Object(s.a)({},t.state.currentEvaluation,{evaluations:r});t.updateState(Object(s.a)({},t.state,{grid:i,currentEvaluation:u}),n)},t.deleteStudentsWithoutName=function(){var a=t.state.currentEvaluation.evaluations.filter(function(a){return a.name});t.updateState(Object(s.a)({},t.state,{deleteDialogShown:!1}),function(){t.updateEvaluations(a,t.state.currentEvaluation.gradesConfig)})},t.changeTitle=function(a){var e=Object(s.a)({},t.state.currentEvaluation,{name:a}),n=t.state.evaluations.map(function(e){return e.name===t.state.currentEvaluation.name&&(e.name=a),e});t.updateState(Object(s.a)({},t.state,{currentEvaluation:e,evaluations:n}))},t.addEvaluation=function(){var a={name:"Nueva evaluaci\xf3n "+Date.now(),evaluations:[{id:1,name:"Ricardo Pall\xe1s",units:[0,0,0,0,0,0,0,0,0,0],unitsGrade:0,tasksGrade:0,dailyGrade:0,finalGrade:0}],gradesConfig:R},e=t.state.evaluations.concat(a);t.updateState(Object(s.a)({},t.state,{evaluations:e}),function(){t.changeCurrentEvaluation(a.name)})},t.changeCurrentEvaluation=function(a){var e=t.state.currentEvaluation,n=O(e.evaluations,e.gradesConfig),r=t.state.evaluations.map(function(a){return a.name===e.name&&(a.evaluations=n),a});t.updateState(Object(s.a)({},t.state,{evaluations:r}),function(){var e=t.state.evaluations.find(function(e){return e.name===a});if(e){var n=U(e.evaluations);t.updateState(Object(s.a)({},t.state,{currentEvaluation:e,grid:n,nextConfigCandidate:e.gradesConfig}))}})},t.updateState=function(a,e){t.setState(a,function(){D.saveState(a),e&&e()})};var n=D.getState();if(n)t.state=n;else{var r={name:"Lengua - Primer trimestre 2019",evaluations:[{id:1,name:"Ricardo Pall\xe1s",units:[0,0,0,0,0,0,0,0,0,0],unitsGrade:0,tasksGrade:0,dailyGrade:0,finalGrade:0}],gradesConfig:R};t.state={evaluations:[r],currentEvaluation:r,grid:U(r.evaluations),nextConfigCandidate:R,nextConfigCandidateValid:!0,deleteDialogShown:!1}}return t}return Object(v.a)(e,a),Object(l.a)(e,[{key:"render",value:function(){var a=this;return r.a.createElement(h.a,{height:"100%",paddingLeft:32,paddingTop:32,paddingBottom:32,paddingRight:32,background:"tint2",borderRadius:3},r.a.createElement(p.a,{name:"text-input-name",className:"title",onChange:function(e){return a.changeTitle(e.target.value)},value:this.state.currentEvaluation.name}),r.a.createElement(h.a,null,r.a.createElement(C.a,{width:240,marginTop:16,value:this.state.currentEvaluation.name,onChange:function(e){return a.changeCurrentEvaluation(e.target.value)}},this.state.evaluations.map(function(a){return r.a.createElement("option",{value:a.name},a.name)})),r.a.createElement(E.a,{marginLeft:16,appearance:"primary",onClick:this.addEvaluation},"A\xf1adir tabla")),r.a.createElement(h.a,{marginTop:48},r.a.createElement(N,{data:this.state.grid,valueRenderer:function(a){return a.value},sheetRenderer:function(a){return r.a.createElement("table",{className:a.className},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"action-cell"}),I.map(function(a,e){return r.a.createElement("th",{key:e,className:"rotate"}," ",r.a.createElement("div",null,r.a.createElement("span",null,a," ")))}))),r.a.createElement("tbody",null,a.children))},onCellsChanged:function(e){var t=a.state.grid.map(function(a){return Object(o.a)(a)});e.forEach(function(a){a.cell;var e=a.row,n=a.col,r=a.value;t[e][n]=Object(s.a)({},t[e][n],{value:r})});var n=F(t),r=a.state.currentEvaluation.gradesConfig;a.updateEvaluations(n,r,function(){(function(a){return!!a.find(function(a){return!a.name})})(n)&&a.updateState(Object(s.a)({},a.state,{deleteDialogShown:!0}))})},cellRenderer:T})),r.a.createElement(E.a,{marginTop:16,onClick:this.addRow,appearance:"primary"},"A\xf1adir fila"),r.a.createElement(h.a,{marginTop:48},r.a.createElement(b.a,{className:"configPercentageText",width:210,marginRight:4},"Porcentaje pruebas: "),r.a.createElement(p.a,{isInvalid:!this.state.nextConfigCandidateValid,width:40,onChange:function(e){return a.unitsGradeConfigChanged(e.target.value)},value:this.state.nextConfigCandidate.unitsGradePercentage})),r.a.createElement(h.a,{marginTop:4},r.a.createElement(b.a,{className:"configPercentageText",width:210,marginRight:4},"Porcentaje cuadernos y tareas: "),r.a.createElement(p.a,{isInvalid:!this.state.nextConfigCandidateValid,width:40,onChange:function(e){return a.tasksGradeConfigChanged(e.target.value)},value:this.state.nextConfigCandidate.tasksGradePercentage})),r.a.createElement(h.a,{marginTop:4},r.a.createElement(b.a,{className:"configPercentageText",width:210,marginRight:4},"Porcentaje observaci\xf3n diaria: "),r.a.createElement(p.a,{isInvalid:!this.state.nextConfigCandidateValid,width:40,onChange:function(e){return a.dailyGradeConfigChanged(e.target.value)},value:this.state.nextConfigCandidate.dailyGradePercentage})),r.a.createElement(G.a,{isShown:this.state.deleteDialogShown,title:"Borrar almuno",intent:"danger",confirmLabel:"S\xed",cancelLabel:"No",onConfirm:this.deleteStudentsWithoutName,onCancel:function(){return a.updateState(Object(s.a)({},a.state,{deleteDialogShown:!1}))}},"\xbfDesea borrar el alumno?"))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(a){a.unregister()})}},[[118,1,2]]]);
//# sourceMappingURL=main.4088d9f4.chunk.js.map