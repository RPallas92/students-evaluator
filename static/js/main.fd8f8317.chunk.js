(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{143:function(a,e,t){"use strict";t.r(e);var n=t(2),r=t.n(n),i=t(24),o=t.n(i),u=(t(60),t(49)),l=t(3),c=t(10),s=t(7),d=t(6),g=t(8),v=t(9),f=(t(61),t(47)),m=t.n(f),h=(t(66),t(157)),C=t(154),p=t(155),E=t(50),b=t(32),G=t(156);function O(a,e){return a.map(function(a){return function(a,e){var t=a.units.reduce(function(a,e){return e+a},0)/a.units.length,n=(t*e.unitsGradePercentage+a.dailyGrade*e.dailyGradePercentage+a.tasksGrade*e.tasksGradePercentage)/100;return Object(l.a)({},a,{unitsGrade:t,finalGrade:n})}(a,e)})}var j=function(a){function e(){return Object(s.a)(this,e),Object(d.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(v.a)(e,a),e}(m.a),w={unitsGradePercentage:40,tasksGradePercentage:40,dailyGradePercentage:20},P=["Nombre alumno","Unidad 1","Unidad 2","Unidad 3","Unidad 4","Unidad 5","Unidad 6","Unidad 7","Unidad 8","Unidad 9","Unidad 10","Pruebas","Cuadernos y tareas","Observaci\xf3n diaria","Nota final"],y=function(a){var e={padding:"16px",background:a.cell.readOnly?"grey":void 0};return r.a.createElement("td",{style:e,onMouseDown:a.onMouseDown,onMouseOver:a.onMouseOver,onDoubleClick:a.onDoubleClick,className:"cell"},a.children)};function k(a){return a.map(function(a){return x(a)})}function x(a){var e=[];return e.push({value:a.id,readOnly:!0}),e.push({value:a.name}),a.units.forEach(function(a){e.push({value:a})}),e.push({value:a.unitsGrade,readOnly:!0}),e.push({value:a.tasksGrade}),e.push({value:a.dailyGrade}),e.push({value:a.finalGrade,readOnly:!0}),e}function S(a){return a.map(function(a){return function(a){var e=a.length-6+2,t=a[0].value,n=a[1].value,r=a.slice(2,e).map(function(a){return parseFloat("".concat(a.value)||"0")}),i=parseFloat("".concat(a[e].value)||"0"),o=parseFloat("".concat(a[e+1].value)||"0"),u=parseFloat("".concat(a[e+2].value)||"0"),l=parseFloat("".concat(a[e+3].value)||"0");return{id:t,name:n,units:r,unitsGrade:i,tasksGrade:o,dailyGrade:u,finalGrade:l}}(a)})}var N=function(a){function e(a){var t;Object(s.a)(this,e),(t=Object(d.a)(this,Object(g.a)(e).call(this,a))).addRow=function(){var a={id:(t.state.currentEvaluation.evaluations.length>0?t.state.currentEvaluation.evaluations[t.state.currentEvaluation.evaluations.length-1].id:0)+1,name:"Ricardo Pall\xe1s",units:[0,0,0,0,0,0,0,0,0,0],unitsGrade:0,tasksGrade:0,dailyGrade:0,finalGrade:0};t.state.currentEvaluation.evaluations.push(a),t.state.grid.push(x(a)),t.setState(t.state)},t.unitsGradeConfigChanged=function(a){var e=parseInt(a,10)||0,n=Object(l.a)({},t.state.nextConfigCandidate,{unitsGradePercentage:e});t.configPercentageChanged(n)},t.tasksGradeConfigChanged=function(a){var e=parseInt(a,10)||0,n=Object(l.a)({},t.state.nextConfigCandidate,{tasksGradePercentage:e});t.configPercentageChanged(n)},t.dailyGradeConfigChanged=function(a){var e=parseInt(a,10)||0,n=Object(l.a)({},t.state.nextConfigCandidate,{dailyGradePercentage:e});t.configPercentageChanged(n)},t.configPercentageChanged=function(a){var e;console.log(a),(e=a).unitsGradePercentage+e.tasksGradePercentage+e.dailyGradePercentage==100?t.setState(Object(l.a)({},t.state,{nextConfigCandidate:a,currentEvaluation:Object(l.a)({},t.state.currentEvaluation,{gradesConfig:a}),nextConfigCandidateValid:!0}),function(){var e=t.state.evaluations.map(function(e){return e.name===t.state.currentEvaluation.name&&(e.gradesConfig=a),e});t.setState(Object(l.a)({},t.state,{evaluations:e}),function(){t.updateEvaluations(t.state.currentEvaluation.evaluations,a)})}):t.setState(Object(l.a)({},t.state,{nextConfigCandidate:a,nextConfigCandidateValid:!1}))},t.updateEvaluations=function(a,e,n){var r=O(a,e),i=k(r),o=Object(l.a)({},t.state.currentEvaluation,{evaluations:r});t.setState(Object(l.a)({},t.state,{grid:i,currentEvaluation:o}),n)},t.deleteStudentsWithoutName=function(){var a=t.state.currentEvaluation.evaluations.filter(function(a){return a.name});t.setState(Object(l.a)({},t.state,{deleteDialogShown:!1}),function(){t.updateEvaluations(a,t.state.currentEvaluation.gradesConfig)})},t.changeTitle=function(a){var e=Object(l.a)({},t.state.currentEvaluation,{name:a}),n=t.state.evaluations.map(function(e){return e.name===t.state.currentEvaluation.name&&(e.name=a),e});t.setState(Object(l.a)({},t.state,{currentEvaluation:e,evaluations:n}))},t.addEvaluation=function(){var a={name:"Nueva evaluaci\xf3n "+Date.now(),evaluations:[{id:1,name:"Ricardo Pall\xe1s",units:[0,0,0,0,0,0,0,0,0,0],unitsGrade:0,tasksGrade:0,dailyGrade:0,finalGrade:0}],gradesConfig:w},e=t.state.evaluations.concat(a);t.setState(Object(l.a)({},t.state,{evaluations:e}),function(){t.changeCurrentEvaluation(a.name)})},t.changeCurrentEvaluation=function(a){var e=t.state.currentEvaluation,n=O(e.evaluations,e.gradesConfig),r=t.state.evaluations.map(function(a){return a.name===e.name&&(a.evaluations=n),a});t.setState(Object(l.a)({},t.state,{evaluations:r}),function(){var e=t.state.evaluations.find(function(e){return e.name===a});if(e){var n=k(e.evaluations);t.setState(Object(l.a)({},t.state,{currentEvaluation:e,grid:n,nextConfigCandidate:e.gradesConfig}))}})};var n={name:"Lengua - Primer trimestre 2019",evaluations:[{id:1,name:"Ricardo Pall\xe1s",units:[0,0,0,0,0,0,0,0,0,0],unitsGrade:0,tasksGrade:0,dailyGrade:0,finalGrade:0}],gradesConfig:w};return t.state={evaluations:[n],currentEvaluation:n,grid:k(n.evaluations),nextConfigCandidate:w,nextConfigCandidateValid:!0,deleteDialogShown:!1},t}return Object(v.a)(e,a),Object(c.a)(e,[{key:"render",value:function(){var a=this;return r.a.createElement(h.a,{height:"100%",paddingLeft:32,paddingTop:32,paddingBottom:32,paddingRight:32,background:"tint2",borderRadius:3},r.a.createElement(C.a,{name:"text-input-name",className:"title",onChange:function(e){return a.changeTitle(e.target.value)},value:this.state.currentEvaluation.name}),r.a.createElement(h.a,null,r.a.createElement(p.a,{width:240,marginTop:16,value:this.state.currentEvaluation.name,onChange:function(e){return a.changeCurrentEvaluation(e.target.value)}},this.state.evaluations.map(function(a){return r.a.createElement("option",{value:a.name},a.name)})),r.a.createElement(E.a,{marginLeft:16,appearance:"primary",onClick:this.addEvaluation},"A\xf1adir tabla")),r.a.createElement(h.a,{marginTop:48},r.a.createElement(j,{data:this.state.grid,valueRenderer:function(a){return a.value},sheetRenderer:function(a){return r.a.createElement("table",{className:a.className},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"action-cell"}),P.map(function(a,e){return r.a.createElement("th",{key:e,className:"rotate"}," ",r.a.createElement("div",null,r.a.createElement("span",null,a," ")))}))),r.a.createElement("tbody",null,a.children))},onCellsChanged:function(e){var t=a.state.grid.map(function(a){return Object(u.a)(a)});e.forEach(function(a){a.cell;var e=a.row,n=a.col,r=a.value;t[e][n]=Object(l.a)({},t[e][n],{value:r})});var n=S(t),r=a.state.currentEvaluation.gradesConfig;a.updateEvaluations(n,r,function(){(function(a){return!!a.find(function(a){return!a.name})})(n)&&a.setState(Object(l.a)({},a.state,{deleteDialogShown:!0}))})},cellRenderer:y})),r.a.createElement(E.a,{marginTop:16,onClick:this.addRow,appearance:"primary"},"A\xf1adir fila"),r.a.createElement(h.a,{marginTop:48},r.a.createElement(b.a,{className:"configPercentageText",width:210,marginRight:4},"Porcentaje pruebas: "),r.a.createElement(C.a,{isInvalid:!this.state.nextConfigCandidateValid,width:40,onChange:function(e){return a.unitsGradeConfigChanged(e.target.value)},value:this.state.nextConfigCandidate.unitsGradePercentage})),r.a.createElement(h.a,{marginTop:4},r.a.createElement(b.a,{className:"configPercentageText",width:210,marginRight:4},"Porcentaje cuadernos y tareas: "),r.a.createElement(C.a,{isInvalid:!this.state.nextConfigCandidateValid,width:40,onChange:function(e){return a.tasksGradeConfigChanged(e.target.value)},value:this.state.nextConfigCandidate.tasksGradePercentage})),r.a.createElement(h.a,{marginTop:4},r.a.createElement(b.a,{className:"configPercentageText",width:210,marginRight:4},"Porcentaje observaci\xf3n diaria: "),r.a.createElement(C.a,{isInvalid:!this.state.nextConfigCandidateValid,width:40,onChange:function(e){return a.dailyGradeConfigChanged(e.target.value)},value:this.state.nextConfigCandidate.dailyGradePercentage})),r.a.createElement(G.a,{isShown:this.state.deleteDialogShown,title:"Borrar almuno",intent:"danger",confirmLabel:"S\xed",cancelLabel:"No",onConfirm:this.deleteStudentsWithoutName,onCancel:function(){return a.setState(Object(l.a)({},a.state,{deleteDialogShown:!1}))}},"\xbfDesea borrar el alumno?"))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(a){a.unregister()})},54:function(a,e,t){a.exports=t(143)},60:function(a,e,t){},61:function(a,e,t){}},[[54,1,2]]]);
//# sourceMappingURL=main.fd8f8317.chunk.js.map